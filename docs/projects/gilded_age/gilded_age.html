<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="GitSam">
<meta name="dcterms.date" content="2025-03-08">

<title>The New Gilded Age – GitSAM</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">GitSAM</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Formats</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../../projects/gilded_age/gilded_age.html">
 <span class="dropdown-text">The New Gilded Age</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../projects/bitcoin_correlation/bitcoin_correlation.html">
 <span class="dropdown-text">Bitcoin Correlation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../projects/pricing_equal/pricing_equal.html">
 <span class="dropdown-text">Pricing Equal Opportunity</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://www.gitsam.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house"></i></a>
    <a href="https://www.youtube.com/@primenumbersam" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-youtube"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/primenumbersam/primenumbersam.github.io">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="mailto:primenumbersam@gmail.com">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#wealth-concentration-and-market-distortions" id="toc-wealth-concentration-and-market-distortions" class="nav-link" data-scroll-target="#wealth-concentration-and-market-distortions">Wealth Concentration and Market Distortions</a>
  <ul class="collapse">
  <li><a href="#extreme-wealth-concentration-and-economic-disparities" id="toc-extreme-wealth-concentration-and-economic-disparities" class="nav-link" data-scroll-target="#extreme-wealth-concentration-and-economic-disparities">Extreme Wealth Concentration and Economic Disparities</a></li>
  <li><a href="#financial-market-distortions-due-to-federal-reserve-policies" id="toc-financial-market-distortions-due-to-federal-reserve-policies" class="nav-link" data-scroll-target="#financial-market-distortions-due-to-federal-reserve-policies">Financial Market Distortions Due to Federal Reserve Policies</a></li>
  </ul></li>
  <li><a href="#economic-protectionism-and-capital-controls" id="toc-economic-protectionism-and-capital-controls" class="nav-link" data-scroll-target="#economic-protectionism-and-capital-controls">Economic Protectionism and Capital Controls</a>
  <ul class="collapse">
  <li><a href="#protectionist-policies-and-global-trade-disruptions" id="toc-protectionist-policies-and-global-trade-disruptions" class="nav-link" data-scroll-target="#protectionist-policies-and-global-trade-disruptions">Protectionist Policies and Global Trade Disruptions</a></li>
  <li><a href="#capital-controls" id="toc-capital-controls" class="nav-link" data-scroll-target="#capital-controls">Capital Controls</a></li>
  </ul></li>
  <li><a href="#military-interventions" id="toc-military-interventions" class="nav-link" data-scroll-target="#military-interventions">Military Interventions</a></li>
  <li><a href="#political-instability-and-the-future-of-the-u.s.-dollar" id="toc-political-instability-and-the-future-of-the-u.s.-dollar" class="nav-link" data-scroll-target="#political-instability-and-the-future-of-the-u.s.-dollar">Political Instability and the Future of the U.S. Dollar</a>
  <ul class="collapse">
  <li><a href="#internal-conflict" id="toc-internal-conflict" class="nav-link" data-scroll-target="#internal-conflict">Internal Conflict</a></li>
  <li><a href="#u.s.-dollar-as-the-global-reserve-currency" id="toc-u.s.-dollar-as-the-global-reserve-currency" class="nav-link" data-scroll-target="#u.s.-dollar-as-the-global-reserve-currency">U.S. Dollar as the Global Reserve Currency</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The New Gilded Age</h1>
<p class="subtitle lead">Extreme Partisan Divide in the United States</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>GitSam </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 8, 2025</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    The United States is experiencing a period of economic and political polarization reminiscent of the late 19th century Gilded Age. This study explores the potential consequences of extreme political bifurcation, economic concentration, and financial instability, drawing historical parallels between the original Gilded Age (1870s-1929) and the current economic landscape. By analyzing historical precedents such as the Great Depression, the 2008 financial crisis, and recent central bank policies, this paper examines the risks posed by increasing wealth concentration, aggressive monetary expansion, protectionist policies, and potential military interventions. We explore qualitatively how the Federal Reserve’s responses to economic downturns, including extreme quantitative easing (QE) and capital controls, could impact financial stability. Furthermore, we evaluate the global ramifications of a politically divided America where economic and military strategies diverge from traditional allies.
  </div>
</div>


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The term ‘Gilded Age’ was originally coined by Mark Twain in his novel The Gilded Age: A Tale of Today <span class="citation" data-cites="twain1873">(<a href="#ref-twain1873" role="doc-biblioref">Twain and Warner 1873</a>)</span>, describing an era characterized by rapid economic expansion, extreme wealth concentration, and political corruption. A similar dynamic is emerging today, where financial and technological elites dominate economic output while wealth inequality reaches historic highs <span class="citation" data-cites="piketty2014capital">(<a href="#ref-piketty2014capital" role="doc-biblioref">Piketty 2014</a>)</span>. The late 19th century saw industrial monopolies like Standard Oil and U.S. Steel controlling markets; today, tech giants such as Amazon, Apple, and Google exhibit similar dominance <span class="citation" data-cites="zucman2019triumph">(<a href="#ref-zucman2019triumph" role="doc-biblioref">Zucman 2019</a>)</span>.</p>
<p>Simultaneously, the Federal Reserve’s response to financial instability, particularly through excessive monetary expansion, contrasts with past policy mistakes that led to severe economic contractions due to monetary shrinkage <span class="citation" data-cites="bernanke2000essays">(<a href="#ref-bernanke2000essays" role="doc-biblioref">Bernanke 2000</a>)</span>. If current economic trends persist—marked by the increasing concentration of wealth, hyperinflation risks, and geopolitical tensions—then the U.S. may be heading toward another crisis akin to the 1929 stock market collapse <span class="citation" data-cites="kindleberger1978manias">(<a href="#ref-kindleberger1978manias" role="doc-biblioref">Kindleberger 1978</a>)</span>.</p>
</section>
<section id="wealth-concentration-and-market-distortions" class="level1">
<h1>Wealth Concentration and Market Distortions</h1>
<section id="extreme-wealth-concentration-and-economic-disparities" class="level2">
<h2 class="anchored" data-anchor-id="extreme-wealth-concentration-and-economic-disparities">Extreme Wealth Concentration and Economic Disparities</h2>
<p>In the late 19th century, “Robber Barons” controlled vast industrial empires while working-class Americans suffered under exploitative labor conditions <span class="citation" data-cites="irwin2017clashing">(<a href="#ref-irwin2017clashing" role="doc-biblioref">Irwin 2017</a>)</span>. Today, the economic landscape reflects a similar dynamic: the top 1% of Americans hold over 30% of total U.S. wealth, and financial markets remain dominated by a handful of institutional investors and corporations <span class="citation" data-cites="saez2020striking">(<a href="#ref-saez2020striking" role="doc-biblioref">Saez and Zucman 2020</a>)</span>. If historical trends hold, wealth concentration at this level often precedes financial and political crises.</p>
</section>
<section id="financial-market-distortions-due-to-federal-reserve-policies" class="level2">
<h2 class="anchored" data-anchor-id="financial-market-distortions-due-to-federal-reserve-policies">Financial Market Distortions Due to Federal Reserve Policies</h2>
<p>Historically, the Federal Reserve’s failure to manage monetary policy effectively has exacerbated financial downturns. During the Great Depression, the Fed allowed the money supply to contract, worsening deflation <span class="citation" data-cites="friedman1993monetary">(<a href="#ref-friedman1993monetary" role="doc-biblioref">Friedman and Schwartz 1993</a>)</span>. Conversely, in the 2008 financial crisis, the Fed implemented massive QE programs to avoid liquidity shortages <span class="citation" data-cites="gopinath2020dollar">(<a href="#ref-gopinath2020dollar" role="doc-biblioref">Gopinath and Gourinchas 2020</a>)</span>. If the Fed continues expanding the money supply unchecked while maintaining low interest rates, it could trigger runaway inflation or asset bubbles <span class="citation" data-cites="reinhart2010growth">(<a href="#ref-reinhart2010growth" role="doc-biblioref">Reinhart and Rogoff 2010</a>)</span>.</p>
</section>
</section>
<section id="economic-protectionism-and-capital-controls" class="level1">
<h1>Economic Protectionism and Capital Controls</h1>
<section id="protectionist-policies-and-global-trade-disruptions" class="level2">
<h2 class="anchored" data-anchor-id="protectionist-policies-and-global-trade-disruptions">Protectionist Policies and Global Trade Disruptions</h2>
<p>In response to financial instability, the U.S. may turn to protectionist measures similar to those seen in the early 20th century, such as the Smoot-Hawley Tariff Act <span class="citation" data-cites="irwin2017clashing">(<a href="#ref-irwin2017clashing" role="doc-biblioref">Irwin 2017</a>)</span>. If the U.S. imposes broad tariffs on allies like Canada, Mexico, and the EU (excluding the UK), retaliatory tariffs could significantly reduce global trade, accelerating economic fragmentation <span class="citation" data-cites="acker2020polarization">(<a href="#ref-acker2020polarization" role="doc-biblioref">Acker 2020</a>)</span>.</p>
</section>
<section id="capital-controls" class="level2">
<h2 class="anchored" data-anchor-id="capital-controls">Capital Controls</h2>
<p>To prevent capital flight, the U.S. government might implement capital controls, restricting the movement of funds outside the country <span class="citation" data-cites="dornbusch1996capital">(<a href="#ref-dornbusch1996capital" role="doc-biblioref">Dornbusch 1996</a>)</span>. Such policies could initially stabilize domestic financial markets by preventing liquidity outflows, but they would ultimately deter foreign investment and reduce the credibility of the U.S. dollar <span class="citation" data-cites="prasad2021future">(<a href="#ref-prasad2021future" role="doc-biblioref">Prasad 2021</a>)</span>. If capital controls are implemented alongside protectionist trade policies, the global financial system could realign, reducing reliance on the dollar <span class="citation" data-cites="eichengreen2019privilege">(<a href="#ref-eichengreen2019privilege" role="doc-biblioref">Eichengreen 2019</a>)</span>.</p>
</section>
</section>
<section id="military-interventions" class="level1">
<h1>Military Interventions</h1>
<p>If economic instability threatens U.S. financial dominance, military interventions could become a tool for securing resource control, as seen in the Iraq War <span class="citation" data-cites="stiglitz2008three">(<a href="#ref-stiglitz2008three" role="doc-biblioref">Stiglitz 2008</a>)</span>. If the U.S. uses force to maintain oil-based dollar hegemony, it risks broader geopolitical conflict, increasing economic uncertainty and reducing investor confidence <span class="citation" data-cites="gopinath2020dollar">(<a href="#ref-gopinath2020dollar" role="doc-biblioref">Gopinath and Gourinchas 2020</a>)</span>.</p>
</section>
<section id="political-instability-and-the-future-of-the-u.s.-dollar" class="level1">
<h1>Political Instability and the Future of the U.S. Dollar</h1>
<section id="internal-conflict" class="level2">
<h2 class="anchored" data-anchor-id="internal-conflict">Internal Conflict</h2>
<p>With increasing partisan division, the U.S. could experience state-led resistance against federal economic policies. Democratic-led states might oppose Republican federal mandates, leading to legal disputes over taxation, social policies, and trade regulations <span class="citation" data-cites="levitsky2018how">(<a href="#ref-levitsky2018how" role="doc-biblioref">Levitsky and Ziblatt 2018</a>)</span>. In extreme cases, states like California could advocate for economic or political autonomy, mirroring secessionist movements of the 19th century, while Texas, despite its strong Republican leanings, might push for greater state sovereignty in response to federal overreach or shifting national policies <span class="citation" data-cites="acker2020polarization">(<a href="#ref-acker2020polarization" role="doc-biblioref">Acker 2020</a>)</span>.</p>
</section>
<section id="u.s.-dollar-as-the-global-reserve-currency" class="level2">
<h2 class="anchored" data-anchor-id="u.s.-dollar-as-the-global-reserve-currency">U.S. Dollar as the Global Reserve Currency</h2>
<p>The decline of the British pound post-World War II illustrates how global reserve currencies can lose dominance due to internal and external economic shifts <span class="citation" data-cites="eichengreen2019privilege">(<a href="#ref-eichengreen2019privilege" role="doc-biblioref">Eichengreen 2019</a>)</span>. If U.S. political instability continues, central banks worldwide may accelerate diversification away from dollar holdings, increasing reliance on alternative financial networks such as BRICS payment systems, Bitcoin, and other emerging digital currencies. <span class="citation" data-cites="prasad2021future">(<a href="#ref-prasad2021future" role="doc-biblioref">Prasad 2021</a>)</span>.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The parallels between the late 19th century Gilded Age and the modern U.S. economy suggest that wealth concentration, financial market distortions, and political instability could lead to a systemic crisis. The combination of aggressive Federal Reserve monetary expansion, protectionist policies, and potential military interventions may further weaken U.S. financial dominance. If these trends continue unchecked, the global financial system could transition away from U.S. dollar hegemony, and political polarization within the U.S. could escalate into unprecedented state-level disputes. Beyond further research, fostering greater dialogue, mutual understanding, and cooperative governance will be essential to mitigating escalation and ensuring long-term economic and political stability</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-acker2020polarization" class="csl-entry" role="listitem">
Acker, James. 2020. <span>“The Effects of Partisan Polarization on State and Federal Relations.”</span> <em>Political Science Review</em> 12 (1): 45–62.
</div>
<div id="ref-bernanke2000essays" class="csl-entry" role="listitem">
Bernanke, Ben S. 2000. <em>Essays on the Great Depression</em>. Princeton University Press.
</div>
<div id="ref-dornbusch1996capital" class="csl-entry" role="listitem">
Dornbusch, Rudiger. 1996. <em>Capital Controls, Exchange Rates, and Monetary Policy in the World Economy</em>. University of Chicago Press.
</div>
<div id="ref-eichengreen2019privilege" class="csl-entry" role="listitem">
Eichengreen, Barry. 2019. <em>The Privilege of Seniorage: How America Became the World’s Reserve Currency</em>. Oxford University Press.
</div>
<div id="ref-friedman1993monetary" class="csl-entry" role="listitem">
Friedman, Milton, and Anna Schwartz. 1993. <em>A Monetary History of the United States, 1867-1960</em>. Princeton University Press.
</div>
<div id="ref-gopinath2020dollar" class="csl-entry" role="listitem">
Gopinath, Gita, and Pierre-Olivier Gourinchas. 2020. <span>“The Future of the Dollar.”</span> <em>Foreign Affairs</em> 99: 10–19.
</div>
<div id="ref-irwin2017clashing" class="csl-entry" role="listitem">
Irwin, Douglas A. 2017. <em>Clashing over Commerce: A History of US Trade Policy</em>. University of Chicago Press.
</div>
<div id="ref-kindleberger1978manias" class="csl-entry" role="listitem">
Kindleberger, Charles P. 1978. <em>Manias, Panics, and Crashes: A History of Financial Crises</em>. Basic Books.
</div>
<div id="ref-levitsky2018how" class="csl-entry" role="listitem">
Levitsky, Steven, and Daniel Ziblatt. 2018. <em>How Democracies Die</em>. Crown Publishing Group.
</div>
<div id="ref-piketty2014capital" class="csl-entry" role="listitem">
Piketty, Thomas. 2014. <em>Capital in the Twenty-First Century</em>. Harvard University Press.
</div>
<div id="ref-prasad2021future" class="csl-entry" role="listitem">
Prasad, Eswar. 2021. <em>The Future of Money: How the Digital Revolution Is Transforming Currencies and Finance</em>. Harvard University Press.
</div>
<div id="ref-reinhart2010growth" class="csl-entry" role="listitem">
Reinhart, Carmen M, and Kenneth S Rogoff. 2010. <span>“Growth in a Time of Debt.”</span> <em>American Economic Review</em> 100 (2): 573–78.
</div>
<div id="ref-saez2020striking" class="csl-entry" role="listitem">
Saez, Emmanuel, and Gabriel Zucman. 2020. <span>“Striking It Richer: The Evolution of Top Incomes in the United States.”</span> <em>Quarterly Journal of Economics</em> 135: 1373–1442.
</div>
<div id="ref-stiglitz2008three" class="csl-entry" role="listitem">
Stiglitz, Joseph. 2008. <em>The Three Trillion Dollar War: The True Cost of the Iraq Conflict</em>. WW Norton &amp; Company.
</div>
<div id="ref-twain1873" class="csl-entry" role="listitem">
Twain, Mark, and Charles Dudley Warner. 1873. <em>The Gilded Age: A Tale of Today</em>. American Publishing Company.
</div>
<div id="ref-zucman2019triumph" class="csl-entry" role="listitem">
Zucman, Gabriel. 2019. <em>The Triumph of Injustice: How the Rich Dodge Taxes and How to Make Them Pay</em>. W. W. Norton &amp; Company.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>